# 元编程与泛型编程

一种编程范式。

- 编程：写一个程序去处理数据
- 元编程：写个程序去处理程序，C++用模板去实现，写一段或生成一段程序去处理另一段程序。编译器在编译时根据模板生成模板实例，类生成类实例，函数生成函数实例，也就是程序。
- 泛型编程：写个程序去处理数据，只对数据的结构做最小假设，是程序能重用去处理广泛的数据类型。C++的泛型编程即编译时多态(另一种是函数重载)，又元编程实现，也就是由模板生成代码，模板代码处理多类型数据，生成的每个代码只能处理一种类型的数据。

## 初始模板

返回两个数的最大值，可能是整型、可能是浮点、可能是字符。C语言要写三个函数，C++可以函数重载，三个相同的函数体写三遍，冗余且易出错。

# 函数模板

带有泛型的函数模板，和`generic type`关联在一起。所有模板带有模板前缀：
```C++
// 多个类型参数用逗号分隔。
template <typename T, typename S>
```
`T`是类型参数，函数的参数中出现次数不少于一次，指明函数参数的类型。可以作用于：返回值类型(可以是`auto`)，参数类型，局部变量的类型。

声明类型参数：`<typename T>`或`<class T>`，前者描述性强。

编译器根据函数调用的实参，生成模板函数的实例：`add(1, 2,0)`，推断两者类型。用函数模板的参数进行类型匹配，将函数模板生成具体的函数。