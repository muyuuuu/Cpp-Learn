# 对象和类

`OOP(object-oriented programming)`，使用对象（类的实例）进行程序设计。特征：

1. 抽象
2. 多态
3. 继承
4. 封装

类的组成：

1. 属性（数据域）
2. 函数（定义行为）
3. 两种特殊的函数：构造函数`ctor`（创建对象调用）和析构函数`dtor`（对象销毁时调用）

## 构造函数

1. 创建对象时调用
2. 与类同名
3. 无返回值
4. 可重载
5. 可不带参数
6. 可以不写声明函数，不明确的声明构造函数，编译器会提供一个空函数体的默认构造函数（无参数构造函数）

对象指针访问对象的数据和函数，如何操作？

# 对象访问和匿名(anonymous)对象

类是一种数据类型，和 `int` 同一个级别。前者定义对象，后者定义变量。

代表类型的名字首字母大写，其他字母大小写混合。

## 成员(memberwise)拷贝

默认情况下，每一个数据域成员全部被拷贝。

## 匿名对象

创建一个只用一次的对象，不命名的对象是匿名对象。

## 局部类

类声明在函数中

## 嵌套类

类中的类。（不推荐）

# 声明与实现分离

类声明命和实现分开。只涉及函数，不涉及数据域。

- `.h` 类声明，描述类的结构
- `.cpp` 类的实现，描述类的方法
- 类中定义内联函数，无需写`inline`关键字

编译方式：`g++ main.cpp class.cpp -o main.exe`

# 避免头文件被多次包含

`C++` 预处理指令，保证头文件只被包含/编译一次。

```C++
// 刚开始宏没定义
// 下次再包含，宏已经定义，跳过
#ifndef NY_HEADER_FILE_H
// 定义宏和内容
#define MY_HEADER_FILE_H
// 内容
#endif 
```

编译指令，只编译一次
```C++
#pragma once
```

`C++11`中运算符：
```C++
// 建议不加分号
_Pragma("once")
```

# 对象指针和动态对象

函数中生命的对象存在于栈，由编译器自动创建和释放，内存由编译器帮我们管理，函数返回，对象被销毁。

在堆上创建对象，程序员控制对象的生存期。

# 对象数组

- `Circle c[10] {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};` 作为对象数组
- `auto c4 = new Circle[3]{1.2, 2.3, 3.4};` 是数组指针，两者不一样

